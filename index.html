<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>User Registration</title>
        <meta name="description" content="User registration form">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="background-animation">
            <div class="shape shape1"></div>
            <div class="shape shape2"></div>
            <div class="shape shape3"></div>
        </div>

        <div class="container">
            <div class="form-container">
                <div class="form-header">
                    <div class="logo">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <h2>Create Account</h2>
                    <p class="subtitle">Fill your details to create an account</p>
                </div>

                <form class="registration-form" id="registrationForm">
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i>
                            Email
                        </label>
                        <div class="input-group">
                            <input type="email" id="email" name="email" placeholder="Enter your email" required>
                            <span class="input-focus-border"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone">
                            <i class="fas fa-phone"></i>
                            Phone Number
                        </label>
                        <div class="input-group">
                            <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" placeholder="1234567890" required>
                            <span class="input-focus-border"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">
                            <i class="fas fa-lock"></i>
                            Password
                        </label>
                        <div class="input-group">
                            <input type="password" id="password" name="password" placeholder="Create a password" required>
                            <span class="input-focus-border"></span>
                            <button type="button" class="toggle-password" onclick="togglePassword('password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">
                            <i class="fas fa-lock"></i>
                            Confirm Password
                        </label>
                        <div class="input-group">
                            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                            <span class="input-focus-border"></span>
                            <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div id="password-match" class="password-match"></div>
                    </div>

                    <div class="form-group">
                        <label for="birthdate">
                            <i class="fas fa-calendar"></i>
                            Birth Date
                        </label>
                        <div class="input-group">
                            <input type="date" id="birthdate" name="birthdate" required>
                            <span class="input-focus-border"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="address">
                            <i class="fas fa-map-marker-alt"></i>
                            Address
                        </label>
                        <div class="input-group address-group">
                            <textarea id="address" name="address" rows="3" placeholder="Enter your full address" required></textarea>
                            <span class="input-focus-border"></span>
                        </div>
                        <button type="button" class="location-btn" onclick="getCurrentLocation()" title="Get current location">
                            <i class="fas fa-location-arrow"></i>
                            <span class="location-text">Get Location</span>
                        </button>
                        <div id="location-status" class="location-status"></div>
                    </div>

                    <div class="terms-group">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">I agree to the <a href="#" class="terms-link">Terms & Conditions</a></label>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn submit-btn">
                            <i class="fas fa-user-plus"></i> Register
                            <span class="btn-shine"></span>
                        </button>
                        <button type="button" class="btn cancel-btn" onclick="document.getElementById('registrationForm').reset()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>

                <div class="login-option">
                    <p>Already have an account? <a href="#" class="login-link">Login here</a></p>
                </div>

                <div class="social-login">
                    <p>Or sign up with</p>
                    <div class="social-buttons">
                        <button class="social-btn google" title="Sign up with Google">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="social-btn github" title="Sign up with GitHub">
                            <i class="fab fa-github"></i>
                        </button>
                        <button class="social-btn linkedin" title="Sign up with LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Success Modal -->
        <div id="successModal" class="modal">
            <div class="modal-content">
                <div class="modal-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3>Registration Successful!</h3>
                <p>Thank you for registering. Your account has been created successfully.</p>
                <button class="modal-close-btn" onclick="closeSuccessModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <script>
            function togglePassword(fieldId) {
                const passwordInput = document.getElementById(fieldId);
                const toggleButton = passwordInput.parentElement.querySelector('.toggle-password i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleButton.classList.remove('fa-eye');
                    toggleButton.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    toggleButton.classList.remove('fa-eye-slash');
                    toggleButton.classList.add('fa-eye');
                }
            }

            function validatePasswordMatch() {
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const matchDiv = document.getElementById('password-match');
                
                if (confirmPassword === '') {
                    matchDiv.innerHTML = '';
                    matchDiv.className = 'password-match';
                    return true;
                }
                
                if (password === confirmPassword) {
                    matchDiv.innerHTML = '<i class="fas fa-check"></i> Passwords match';
                    matchDiv.className = 'password-match success';
                    return true;
                } else {
                    matchDiv.innerHTML = '<i class="fas fa-times"></i> Passwords do not match';
                    matchDiv.className = 'password-match error';
                    return false;
                }
            }

            // Add event listeners for password validation
            document.getElementById('password').addEventListener('input', validatePasswordMatch);
            document.getElementById('confirmPassword').addEventListener('input', validatePasswordMatch);

            function getCurrentLocation() {
                const locationBtn = document.querySelector('.location-btn');
                const locationStatus = document.getElementById('location-status');
                const addressField = document.getElementById('address');

                // Disable button and show loading state
                locationBtn.disabled = true;
                locationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span class="location-text">Getting Location...</span>';
                locationStatus.innerHTML = 'Fetching your location...';
                locationStatus.className = 'location-status loading';

                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        // Success callback
                        async (position) => {
                            try {
                                const { latitude, longitude } = position.coords;
                                
                                // Using OpenStreetMap Nominatim API for reverse geocoding
                                const response = await fetch(
                                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`
                                );
                                
                                const data = await response.json();
                                
                                if (data.display_name) {
                                    addressField.value = data.display_name;
                                    locationStatus.innerHTML = 'Location found!';
                                    locationStatus.className = 'location-status success';
                                } else {
                                    throw new Error('No address found');
                                }
                            } catch (error) {
                                locationStatus.innerHTML = 'Could not get address details. Please enter manually.';
                                locationStatus.className = 'location-status error';
                            }
                            
                            // Reset button state
                            locationBtn.disabled = false;
                            locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i><span class="location-text">Get Location</span>';
                        },
                        // Error callback
                        (error) => {
                            let errorMessage = 'Could not get your location. ';
                            switch(error.code) {
                                case error.PERMISSION_DENIED:
                                    errorMessage += 'Please allow location access.';
                                    break;
                                case error.POSITION_UNAVAILABLE:
                                    errorMessage += 'Location information is unavailable.';
                                    break;
                                case error.TIMEOUT:
                                    errorMessage += 'Location request timed out.';
                                    break;
                                default:
                                    errorMessage += 'An unknown error occurred.';
                            }
                            locationStatus.innerHTML = errorMessage;
                            locationStatus.className = 'location-status error';
                            
                            // Reset button state
                            locationBtn.disabled = false;
                            locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i><span class="location-text">Get Location</span>';
                        },
                        // Options
                        {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        }
                    );
                } else {
                    locationStatus.innerHTML = 'Geolocation is not supported by your browser.';
                    locationStatus.className = 'location-status error';
                    
                    // Reset button state
                    locationBtn.disabled = false;
                    locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i><span class="location-text">Get Location</span>';
                }
            }

            // Form submission handling
            document.getElementById('registrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate password match
                if (!validatePasswordMatch()) {
                    alert('Please make sure both passwords match before submitting.');
                    return;
                }
                
                // Here you would typically send the form data to your server
                // For now, we'll just show the success message
                
                // Get form data
                const formData = new FormData(this);
                const formDataObj = {};
                formData.forEach((value, key) => formDataObj[key] = value);
                
                // Simulate server request (replace with actual API call)
                setTimeout(() => {
                    showSuccessModal();
                    this.reset(); // Reset the form
                    // Clear password match message
                    document.getElementById('password-match').innerHTML = '';
                    document.getElementById('password-match').className = 'password-match';
                }, 1000);
            });

            function showSuccessModal() {
                const modal = document.getElementById('successModal');
                modal.classList.add('show');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            }

            function closeSuccessModal() {
                const modal = document.getElementById('successModal');
                modal.classList.remove('show');
                document.body.style.overflow = ''; // Restore scrolling
            }

            // Close modal when clicking outside
            window.onclick = function(event) {
                const modal = document.getElementById('successModal');
                if (event.target === modal) {
                    closeSuccessModal();
                }
            }

            // Close modal with Escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeSuccessModal();
                }
            });
        </script>
    </body>
</html>
